# ç ”å‘è®¢å•è·Ÿè¸ªç³»ç»Ÿ - C# WinForms ç‰ˆæœ¬

è¿™æ˜¯ä¸€ä¸ªåŸºäº C# WinForms å’Œ WebView2 çš„ç ”å‘è®¢å•è·Ÿè¸ªç³»ç»Ÿï¼Œä½¿ç”¨ SQLite æ•°æ®åº“å­˜å‚¨æ•°æ®ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… é¡¹ç›®ç®¡ç†å’Œè·Ÿè¸ª
- âœ… ä»»åŠ¡ç®¡ç†
- âœ… ç”¨æˆ·å’Œå·¥ç¨‹å¸ˆç®¡ç†
- âœ… äººåŠ›èµ„æºæ—¥å†è§†å›¾
- âœ… é¡¹ç›®è¯¦æƒ…å’Œæ—¶é—´è½´
- âœ… SQLite æ•°æ®åº“å­˜å‚¨
- âš¡ **ç›´æ¥é€šä¿¡æ¨¡å¼** - JavaScript ç›´æ¥è°ƒç”¨ C# æ–¹æ³•ï¼Œæ—  HTTP å¼€é”€ï¼Œæå¿«å“åº”
- ğŸ”„ HTTP API æ¨¡å¼ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
- âœ… ç°ä»£åŒ– Web UIï¼ˆReact + Tailwind CSSï¼‰

## æŠ€æœ¯æ ˆ

### åç«¯
- .NET 6.0
- WinForms
- WebView2
- ASP.NET Core Web API
- Entity Framework Core
- SQLite

### å‰ç«¯
- React 18
- Vite
- Tailwind CSS
- Framer Motion
- React Router

## é¡¹ç›®ç»“æ„

```
RDTrackingSystem/
â”œâ”€â”€ Controllers/          # API æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ ProjectsController.cs
â”‚   â”œâ”€â”€ TasksController.cs
â”‚   â””â”€â”€ UsersController.cs
â”œâ”€â”€ Data/                 # æ•°æ®è®¿é—®å±‚
â”‚   â””â”€â”€ ApplicationDbContext.cs
â”œâ”€â”€ Models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ Project.cs
â”‚   â”œâ”€â”€ Task.cs
â”‚   â””â”€â”€ User.cs
â”œâ”€â”€ Services/             # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ ApiServer.cs
â”‚   â””â”€â”€ DatabaseSeeder.cs
â”œâ”€â”€ MainForm.cs           # ä¸»çª—ä½“
â”œâ”€â”€ Program.cs            # ç¨‹åºå…¥å£
â””â”€â”€ wwwroot/              # Web åº”ç”¨æ–‡ä»¶ï¼ˆéœ€è¦æ„å»ºåå¤åˆ¶ï¼‰
```

## å®‰è£…å’Œè¿è¡Œ

### å‰ç½®è¦æ±‚

1. .NET 8.0 SDK
2. Visual Studio 2022 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæ¨èï¼‰
3. WebView2 Runtimeï¼ˆé€šå¸¸å·²é¢„è£…ï¼‰

### æ„å»ºæ­¥éª¤

1. **æ„å»ºå‰ç«¯åº”ç”¨**
   ```bash
   cd "é¡¹ç›®æ ¹ç›®å½•"
   npm install
   npm run build
   ```

2. **å¤åˆ¶å‰ç«¯æ–‡ä»¶åˆ° C# é¡¹ç›®**
   - å°† `dist` ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ° `RDTrackingSystem/wwwroot/` ç›®å½•

3. **æ„å»º C# é¡¹ç›®**
   ```bash
   cd RDTrackingSystem
   dotnet build
   ```

4. **è¿è¡Œåº”ç”¨**
   ```bash
   dotnet run
   ```

### åœ¨ Visual Studio ä¸­è¿è¡Œ

1. æ‰“å¼€ `RDTrackingSystem.sln`
2. ç¡®ä¿å‰ç«¯æ–‡ä»¶å·²å¤åˆ¶åˆ° `wwwroot` ç›®å½•
3. æŒ‰ F5 è¿è¡Œ

## æ•°æ®åº“

æ•°æ®åº“æ–‡ä»¶ä½ç½®ï¼š`RDTrackingSystem/Data/rdtracking.db`

é¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“å¹¶åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®ã€‚

## é€šä¿¡æ–¹å¼

### ç›´æ¥é€šä¿¡æ¨¡å¼ï¼ˆé»˜è®¤ï¼Œæ¨èï¼‰

ä½¿ç”¨ WebView2 çš„åŸç”Ÿæ¡¥æ¥ï¼ŒJavaScript ç›´æ¥è°ƒç”¨ C# æ–¹æ³•ï¼š
- âš¡ **æå¿«é€Ÿåº¦** - æ—  HTTP å¼€é”€ï¼Œå“åº”æ—¶é—´ <5ms
- ğŸš€ **é›¶å»¶è¿Ÿ** - è¿›ç¨‹å†…é€šä¿¡
- ğŸ’¾ **ä½èµ„æºå ç”¨** - ä¸éœ€è¦ HTTP æœåŠ¡å™¨

**å·¥ä½œåŸç†ï¼š**
- C# å¯¹è±¡é€šè¿‡ `AddHostObjectToScript` æ³¨å…¥åˆ° JavaScript
- JavaScript é€šè¿‡ `window.chrome.webview.hostObjects.nativeBridge` è®¿é—®
- è‡ªåŠ¨æ£€æµ‹å¯ç”¨æ€§ï¼Œä¸å¯ç”¨æ—¶å›é€€åˆ° HTTP API

### HTTP API æ¨¡å¼ï¼ˆå¤‡ç”¨ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨ HTTP APIï¼ˆä¾‹å¦‚è°ƒè¯•ï¼‰ï¼Œåœ¨ `Program.cs` ä¸­è®¾ç½®ï¼š
```csharp
var useDirectCommunication = false;
```

API ç«¯ç‚¹ï¼š
- `GET /api/projects` - è·å–æ‰€æœ‰é¡¹ç›®
- `POST /api/projects` - åˆ›å»ºé¡¹ç›®
- `PUT /api/projects/{id}` - æ›´æ–°é¡¹ç›®
- `DELETE /api/projects/{id}` - åˆ é™¤é¡¹ç›®
- ï¼ˆç”¨æˆ·å’Œä»»åŠ¡ API ç±»ä¼¼ï¼‰

## å¼€å‘è¯´æ˜

### ä¿®æ”¹å‰ç«¯ä»£ç 

1. åœ¨é¡¹ç›®æ ¹ç›®å½•ä¿®æ”¹å‰ç«¯ä»£ç 
2. è¿è¡Œ `npm run build` æ„å»º
3. å°† `dist` ç›®å½•å†…å®¹å¤åˆ¶åˆ° `RDTrackingSystem/wwwroot/`

### æ•°æ®åº“è¿ç§»

å¦‚æœéœ€è¦ä¿®æ”¹æ•°æ®åº“ç»“æ„ï¼š

1. ä¿®æ”¹ Models ä¸­çš„å®ä½“ç±»
2. åˆ é™¤ç°æœ‰çš„ `rdtracking.db` æ–‡ä»¶
3. é‡æ–°è¿è¡Œåº”ç”¨ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºæ–°æ•°æ®åº“ï¼‰

## æ³¨æ„äº‹é¡¹

- WebView2 éœ€è¦å®‰è£… WebView2 Runtimeï¼ˆWindows 10/11 é€šå¸¸å·²é¢„è£…ï¼‰
- é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“å¹¶åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®
- **é»˜è®¤ä½¿ç”¨ç›´æ¥é€šä¿¡æ¨¡å¼**ï¼Œæ— éœ€ HTTP æœåŠ¡å™¨ï¼Œæ— éœ€æ‹…å¿ƒç«¯å£å ç”¨
- å¦‚éœ€ä½¿ç”¨ HTTP API æ¨¡å¼ï¼Œç¡®ä¿ç«¯å£ 5000 æœªè¢«å ç”¨
- æŸ¥çœ‹ `PERFORMANCE.md` äº†è§£æ€§èƒ½ä¼˜åŒ–è¯¦æƒ…
- æŸ¥çœ‹ `TESTING.md` äº†è§£å¦‚ä½•éªŒè¯ç›´æ¥é€šä¿¡æ˜¯å¦å·¥ä½œ

## è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºå†…éƒ¨ä½¿ç”¨é¡¹ç›®ã€‚
